{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar SearchkitManager_1 = require(\"../SearchkitManager\");\n\nvar support_1 = require(\"../support\");\n\nvar mapValues = require(\"lodash/mapValues\");\n\nvar block_1 = require(\"./block\");\n\nvar SearchkitComponent =\n/** @class */\nfunction (_super) {\n  __extends(SearchkitComponent, _super);\n\n  function SearchkitComponent(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.translations = {};\n    _this.unmounted = false;\n    _this.translate = _this.translate.bind(_this);\n    return _this;\n  }\n\n  SearchkitComponent.prototype.defineBEMBlocks = function () {\n    return null;\n  };\n\n  SearchkitComponent.prototype.defineAccessor = function () {\n    return null;\n  };\n\n  SearchkitComponent.prototype.translate = function (key, interpolations) {\n    var translation = this.searchkit.translate(key) || this.props.translations && this.props.translations[key] || this.translations[key] || key;\n    return support_1.Utils.translate(translation, interpolations);\n  };\n\n  Object.defineProperty(SearchkitComponent.prototype, \"bemBlocks\", {\n    get: function get() {\n      return mapValues(this.defineBEMBlocks(), function (cssClass) {\n        return block_1.block(cssClass).el;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SearchkitComponent.prototype, \"searchkit\", {\n    get: function get() {\n      return this._searchkit || (this._searchkit = this._getSearchkit());\n    },\n    set: function set(value) {\n      this._searchkit = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SearchkitComponent.prototype._getSearchkit = function () {\n    return this.props.searchkit || this.context[\"searchkit\"];\n  };\n\n  SearchkitComponent.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this._initAccessor();\n\n    if (this.searchkit) {\n      this.stateListenerUnsubscribe = this.searchkit.emitter.addListener(function () {\n        if (!_this.unmounted) {\n          _this.forceUpdate();\n        }\n      });\n    }\n\n    this.forceUpdate();\n  };\n\n  SearchkitComponent.prototype._initAccessor = function () {\n    if (this.searchkit && !this.accessor) {\n      this.accessor = this.defineAccessor();\n\n      if (this.accessor) {\n        this.accessor = this.searchkit.addAccessor(this.accessor);\n        return true;\n      }\n    }\n\n    if (!this.searchkit) {\n      console.warn(\"No searchkit found in props or context for \" + this.constructor[\"name\"]);\n    }\n\n    return false;\n  };\n\n  SearchkitComponent.prototype.componentWillUnmount = function () {\n    if (this.stateListenerUnsubscribe) {\n      this.stateListenerUnsubscribe();\n    }\n\n    if (this.searchkit && this.accessor) {\n      this.searchkit.removeAccessor(this.accessor);\n    }\n\n    this.unmounted = true;\n  };\n\n  SearchkitComponent.prototype.getResults = function () {\n    return this.searchkit.results;\n  };\n\n  SearchkitComponent.prototype.getHits = function () {\n    return this.searchkit.getHits();\n  };\n\n  SearchkitComponent.prototype.getHitsCount = function () {\n    return this.searchkit.getHitsCount();\n  };\n\n  SearchkitComponent.prototype.hasHits = function () {\n    return this.searchkit.hasHits();\n  };\n\n  SearchkitComponent.prototype.hasHitsChanged = function () {\n    return this.searchkit.hasHitsChanged();\n  };\n\n  SearchkitComponent.prototype.getQuery = function () {\n    return this.searchkit.query;\n  };\n\n  SearchkitComponent.prototype.isInitialLoading = function () {\n    return this.searchkit.initialLoading;\n  };\n\n  SearchkitComponent.prototype.isLoading = function () {\n    return this.searchkit.loading;\n  };\n\n  SearchkitComponent.prototype.getError = function () {\n    return this.searchkit.error;\n  };\n\n  SearchkitComponent.contextTypes = {\n    searchkit: PropTypes.instanceOf(SearchkitManager_1.SearchkitManager)\n  };\n\n  SearchkitComponent.translationsPropType = function (translations) {\n    return PropTypes.shape(mapValues(translations, function () {\n      return PropTypes.string;\n    }));\n  };\n\n  SearchkitComponent.propTypes = {\n    mod: PropTypes.string,\n    className: PropTypes.string,\n    translations: PropTypes.objectOf(PropTypes.string),\n    searchkit: PropTypes.instanceOf(SearchkitManager_1.SearchkitManager)\n  };\n  return SearchkitComponent;\n}(React.Component);\n\nexports.SearchkitComponent = SearchkitComponent;","map":null,"metadata":{},"sourceType":"script"}